**Construction and validation of DSFC**  

To construct DSFC, all sequences predicted as complete ORFs were aligned to the centroid (the representative sequences clustered >20% amino acid identity) using blastp (v2.16.0) in each cluster with > 30 members:  

`blastp -subject complete_members.fa -query rep.fa -outfmt 6 -max_hsps 1 -max_target_seqs 3 >> mem2rep.m8`  

The top-two sequences hit on centroids were subjected to ESMFold with default parameters for structure prediction:  

`esm-fold -i pepsetA.fa -m /path_to_esmfold_model/ -o pepsetA_esm_out/ > pepsetA.esm.log`  

and Extended Data Fig. 3a was generated using FigS3a.violin.R with FigS3a.DSFC.3Dstat.tsv.gz at Zenodo as input, which was also used to generate Fig. 3a.  

For Extended Data Fig. 3b, we selected 220 clusters for benchmark validation with script FigS3b.randomly_pick_clusters_by_compMembsize.pl. All protein structures were predicted using the default parameters of ESMFold, and we generated 10,156 high-confidence structures (pLDDT > 70 and pTM > 0.7, see result FigS3b.rep_cover_mem_structure.xlsx). Subsequently, the high-confidence structures within each cluster were aligned to the representative structure using TMalign:  

`TMalign input_mem1.pdb input_rep1.pdb -a >> rep1.run.log`  

Structural alignments were filtered by TM-score > 0.5 (normalized by length of query). The output result is FigS3b.rep_cover_mem_structure.xlsx. Extended Data Fig. 3b is drawn based on the above results. All predicted structures have been deposited at Zenodo (FigS3b.PC_member_structure.tar.gz).  

We randomly selected 1,000 proteins with high-confidence structures in DSFC, and submitted their sequences to AlphaFold3 online server (AF3) to predict the structures. Biopython version 1.84 was used to convert AF3 predicted models from MMCIF format to PDB format. Then, the average pLDDT scores of the best models generated by AF3 (model_0) were calculated, and high confidence AF3 models (average pLDDT > 0.7, 963 out of 1000 models) were chosen for pairwise comparison against ESMFold models in TM-score (FigS3c.compare_esmfold_af3_random1000.sh, FigS3c.cif2pdb.py) (Extended Data Fig. 3c, script file FigS3c.dotplot.R, and input file FigS3c.ESMFold_vs_AF3_plddt_tmscore.tsv) to assess the robustness of our high confidence models generated by ESMFold. The original output by AF3 online server as well as the ESMFold models are available at Zenodo (FigS3c.AF3_online_pred_results.tar.gz, FigS3c.esmfold_struct.tar.gz).  

**Structural similarity and functional analysis of DSFC**  

Methods in Nomburg et al. (2024) was used for pairwise structure alignments. Briefly, Foldseek (v9.427df8a) (script Nomburg_foldseek.sh) was used to align high-confidence structures in DSFC against 2.3 million protein cluster centroids from the AFDB, all experimental structures in PDB (v20240825), and themselves. For alignments against AFDB and PDB, the best hits were filtered based on a TM-score > 0.5 and E-value < 0.001. For alignments among structures in DSFC, self-alignments were excluded, and the best hits were filtered by coverages (both query cov and target cov) > 0.9 and TM-score > 0.5. Fig. 3bc and Extended Data Fig. 3d were generated using Fig3bc_S3d.2d_density.R (for input files, see FigS3d.DS-PDB_density.dat.gz, Fig3b.DS-AFDB_density.dat.gz, and Fig3c.DS-DS_density.dat.gz at Zenodo).  

To evaluate the structural conservation across archaea and bacteria, we performed clustering of the high-confidence structures categorized to Archaea or Bacteria using Foldseek (v9.427df8a), the clustering result is availible in Fig3.foldseek_clusters_taxonomy.zip at Zenodo:  

`foldseek easy-cluster /HQ3D_TAXO HQ3D_taxo tmp -c 0.9 -e 0.01 --threads 30`  

In Fig. 3d, we calculate the proportions of singleton cluster, and numbers of clusters/members conserved across Domians, Phyla, and lower taxa with script Fig3de.stat.sh (see file hqBaAr.summary.txt in Fig3de.zip at Zenodo). TMHMM (v2.0c) and SignalP (v6.0) were used to predict transmembrane domains and signal peptides, respectively (see script Fig3de.stat.sh). The results were extracted with Fig3d.tmHMM_signalP.merge.pl for easier filtering, the generated file have been deposited at Zenodo (protein_location.tsv in Fig3de.zip). Proteins were classified as follows: if a protein exhibited a secretion probability above 0.75 and contained no transmembrane domains, or contained one transmembrane domain within the first 60 residues in sequence, it was assigned as a secretory protein; proteins lacking both transmembrane domains and signal peptides were classified as cytoplasmatic, while all others were assigned as transmembrane proteins. The barplot was plotted using Fig3d.barplot_decrease.R, and the other parts was generated by Excel software. All necessary intermediate files have been deposited at Zenodo (see Fig3de.zip).  

For Fig. 3e, only structures with an annotation on COG or arCOG terms were included. Enrichment analysis of COG categories was calculated using the Fisher's exact test with the same commands in Fig3e.fisher_test.R. For a certain COG category, numbers of structures within the clusters exhibited cross-domain homologies were compared against the numbers of other structures. All scripts for related analyses are included in Fig3de.stat.sh, and the necessary intermediate files have been deposited at Zenodo (see Fig3de.zip).  

**Identification of novel structural domains**  

We used Foldseek easy-cluster (v9.427df8a) to cluster 1,119,421 high-quality predicted structures into 61,933 clusters (see result Fig3.foldseek_clusters.zip at Zenodo). The representative structures of all clusters were parsed into 192,890 domains by the TED consensus tool (v1.0) (Fig3f.TED_concensus_HM_domainID.dat, Fig3f.ted_output_anomaly_190000domain_HML.txt.gz, and the pdb files for these domains, DSTEDdom.tar.gz at Zenodo), which integrates three domain parsers—Merizo, Chainsaw and UniDoc—where domains identified by all three or any two tools were defined as high and medium quality domains, respectively, totaling 104,508. Following the TED workflow, we applied a series of quality filtering criteria, including packing density > 10.3 (Fig3f.check_packing_density.py), pLDDT80 > 90 (Fig3f.check_plddt.py) and at least 6 secondary structural fragments (Fig3f.check_secseq.py), to refine the selection to 41,224 domains using the script Fig3f.novel_domain_analysis.sh on our GitHub repository. These filtered domains were then exhaustively searched against 2.3 million representative structures of AFDB clusters using Foldseek easy-search (-c 0.6 --cov-mode 2 --tmscore-threshold 0.56 --alignment-type 1 --exhaustive-search), resulting in 392 nonhit domains. When we used Foldseek easy-search, the coverage mode was set to 2 to ensure at least 60% of the query deep-sea domain was aligned to the target AFDB whole structure; and the TM-score threshold was set to 0.56 to be in line with the TED protocol to compensate for the foldseek approximating the true TM-align score. These nonhit domains were considered as relatively novel compared to AFDB. The novelty scores of domains were computed by Foldclass in the meanwhile when the domains were segmented by the TED consensus tool. Then, SymD (v1.61) were used to identify 58 symmetrical domains (Z-score at best alignment > 9).  

**PS: Files listed in "Files_at_Zenodo.txt" have been deposited at Zenodo with DOI: 10.5281/zenodo.17621312**  
